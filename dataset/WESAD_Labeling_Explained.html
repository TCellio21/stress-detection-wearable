<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WESAD Labeling System - Simple Explanation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 15px;
        }
        h2 {
            color: #2980b9;
            margin-top: 40px;
            border-left: 5px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #34495e;
            margin-top: 25px;
        }
        .timeline {
            background: linear-gradient(to bottom, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
            border: 2px solid #dee2e6;
        }
        .timeline-block {
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            position: relative;
        }
        .label-0 {
            background-color: #6c757d;
            color: white;
        }
        .label-1 {
            background-color: #28a745;
            color: white;
        }
        .label-2 {
            background-color: #dc3545;
            color: white;
        }
        .label-3 {
            background-color: #ffc107;
            color: #333;
        }
        .label-4 {
            background-color: #17a2b8;
            color: white;
        }
        .visual-timeline {
            display: flex;
            height: 60px;
            margin: 30px 0;
            border: 2px solid #333;
            border-radius: 5px;
            overflow: hidden;
        }
        .time-segment {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            border-right: 2px solid #333;
        }
        .time-segment:last-child {
            border-right: none;
        }
        .example-box {
            background-color: #f8f9fa;
            border-left: 5px solid #6f42c1;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .code-box {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .important-box {
            background-color: #fff3cd;
            border: 3px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .important-box h3 {
            margin-top: 0;
            color: #856404;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        th {
            background-color: #3498db;
            color: white;
            padding: 12px;
            text-align: left;
        }
        td {
            padding: 12px;
            border-bottom: 1px solid #ecf0f1;
        }
        tr:hover {
            background-color: #f8f9fa;
        }
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        .legend-item {
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }
        .analogy {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }
        .analogy h3 {
            color: white;
            margin-top: 0;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        .comparison-item {
            padding: 20px;
            border-radius: 8px;
        }
        .correct {
            background-color: #d4edda;
            border: 2px solid #28a745;
        }
        .incorrect {
            background-color: #f8d7da;
            border: 2px solid #dc3545;
        }
        .step-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background-color: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ WESAD Labeling System - Simple Explanation</h1>
        <p style="font-size: 1.1em; color: #555;">Understanding how stress classifications are marked in the dataset</p>

        <div class="analogy">
            <h3>üìö Think of it Like a Book with Chapters</h3>
            <p style="font-size: 1.1em; margin: 0;">
                Imagine the 2-hour experiment is like a book. Each "chapter" (condition) is labeled with a number.
                Every single moment (sample) in that chapter gets the same label - like page numbers.
                <strong>The labels tell you WHEN things happened, not HOW the person felt physiologically.</strong>
            </p>
        </div>

        <h2>üè∑Ô∏è The 5 Label Types</h2>

        <div class="legend">
            <div class="legend-item label-0">
                <div style="font-size: 1.5em;">0</div>
                TRANSIENT<br>
                <small>(Ignore this)</small>
            </div>
            <div class="legend-item label-1">
                <div style="font-size: 1.5em;">1</div>
                BASELINE<br>
                <small>(Relaxed)</small>
            </div>
            <div class="legend-item label-2">
                <div style="font-size: 1.5em;">2</div>
                STRESS<br>
                <small>(TSST Task)</small>
            </div>
            <div class="legend-item label-3">
                <div style="font-size: 1.5em;">3</div>
                AMUSEMENT<br>
                <small>(Funny Videos)</small>
            </div>
            <div class="legend-item label-4">
                <div style="font-size: 1.5em;">4</div>
                MEDITATION<br>
                <small>(Recovery)</small>
            </div>
        </div>

        <h2>‚è∞ How Labels Work: Timeline Example</h2>

        <p><strong>Simple explanation:</strong> Every fraction of a second during the experiment gets stamped with a label number. The label tells you what the person was DOING at that moment, not necessarily how stressed they actually were.</p>

        <h3>Visual Timeline of a 2-Hour Session</h3>
        <div class="visual-timeline">
            <div class="time-segment label-1" style="flex: 2;">
                Baseline<br>20 min
            </div>
            <div class="time-segment label-0" style="flex: 0.3; font-size: 11px;">
                Trans
            </div>
            <div class="time-segment label-4" style="flex: 1;">
                Med<br>10 min
            </div>
            <div class="time-segment label-0" style="flex: 0.3; font-size: 11px;">
                Trans
            </div>
            <div class="time-segment label-2" style="flex: 2.5;">
                STRESS (TSST)<br>25 min
            </div>
            <div class="time-segment label-0" style="flex: 0.3; font-size: 11px;">
                Trans
            </div>
            <div class="time-segment label-4" style="flex: 1;">
                Med<br>10 min
            </div>
            <div class="time-segment label-0" style="flex: 0.3; font-size: 11px;">
                Trans
            </div>
            <div class="time-segment label-3" style="flex: 1.5;">
                Amusement<br>15 min
            </div>
        </div>

        <h2>üî¢ How Labels are Stored in the Data</h2>

        <div class="example-box">
            <h3>Example: What the data looks like</h3>
            <p>Imagine you're looking at PPG (heart rate) data from the wrist sensor at 64 samples per second. Each sample has:</p>
            <ul>
                <li><strong>Time:</strong> When it was recorded (e.g., 15 minutes into the session)</li>
                <li><strong>PPG Value:</strong> The actual heart signal measurement</li>
                <li><strong>Label:</strong> What condition the person was in at that moment</li>
            </ul>
        </div>

        <table>
            <tr>
                <th>Time (seconds)</th>
                <th>PPG Value</th>
                <th>Label</th>
                <th>What's Happening</th>
            </tr>
            <tr style="background-color: #d4edda;">
                <td>0 - 1200</td>
                <td>varies</td>
                <td>1</td>
                <td>Baseline - sitting, reading (first 20 minutes)</td>
            </tr>
            <tr style="background-color: #e9ecef;">
                <td>1200 - 1260</td>
                <td>varies</td>
                <td>0</td>
                <td>Transition - walking to stress test room (1 min)</td>
            </tr>
            <tr style="background-color: #f8d7da;">
                <td>1260 - 2760</td>
                <td>varies</td>
                <td>2</td>
                <td>STRESS - TSST test (25 minutes)</td>
            </tr>
            <tr style="background-color: #e9ecef;">
                <td>2760 - 2820</td>
                <td>varies</td>
                <td>0</td>
                <td>Transition - moving to meditation (1 min)</td>
            </tr>
            <tr style="background-color: #d1ecf1;">
                <td>2820 - 3420</td>
                <td>varies</td>
                <td>4</td>
                <td>Meditation - calming down (10 minutes)</td>
            </tr>
        </table>

        <h2>üéØ The Critical Thing to Understand</h2>

        <div class="important-box">
            <h3>‚ö†Ô∏è Labels = Time Periods, NOT Physiological State</h3>
            <p style="font-size: 1.1em;"><strong>This is the most important concept:</strong></p>

            <div class="comparison">
                <div class="comparison-item incorrect">
                    <h4>‚ùå What Labels DON'T Tell You:</h4>
                    <ul>
                        <li>Exactly when their heart rate went up</li>
                        <li>When they actually started feeling stressed</li>
                        <li>How stressed each individual person felt</li>
                        <li>When their body returned to normal</li>
                    </ul>
                </div>

                <div class="comparison-item correct">
                    <h4>‚úÖ What Labels DO Tell You:</h4>
                    <ul>
                        <li>When the stress task started and ended</li>
                        <li>What activity they were doing</li>
                        <li>Which condition they were in</li>
                        <li>The experimental protocol timeline</li>
                    </ul>
                </div>
            </div>
        </div>

        <h2>üìä Real-World Example with Numbers</h2>

        <div class="example-box">
            <h3>Let's say you load Subject S2's data:</h3>

            <div class="code-box">
# Load the data
data = load_wesad_subject('S2')
ppg = data['signal']['wrist']['BVP']     # PPG signal (64 Hz)
labels = data['label']                   # Labels (700 Hz)

# The PPG array might look like:
# ppg = [0.5, 0.52, 0.48, 0.51, ...]  (thousands of values)

# The label array looks like:
# labels = [1, 1, 1, 1, ..., 0, 0, 2, 2, 2, 2, ...]
#          ‚îî‚îÄ 20 min baseline  ‚îîtransition‚îî‚îÄ 25 min stress
            </div>

            <h4>Breaking it down:</h4>
            <ul>
                <li><strong>First 84,000 samples</strong> (20 min √ó 700 Hz) all have label = 1 (baseline)</li>
                <li><strong>Next 42,000 samples</strong> (1 min √ó 700 Hz) have label = 0 (transition)</li>
                <li><strong>Next 105,000 samples</strong> (25 min √ó 700 Hz) have label = 2 (stress)</li>
                <li>And so on...</li>
            </ul>

            <p style="margin-top: 20px;"><strong>Key point:</strong> EVERY sample during those 25 minutes of TSST has label = 2, even though:</p>
            <ul>
                <li>The person's stress builds gradually during the first few minutes</li>
                <li>Their heart rate increases over time (not instantly)</li>
                <li>They might still be calming down at the end</li>
            </ul>
        </div>

        <h2>üé¨ Step-by-Step: What Actually Happens</h2>

        <div class="timeline">
            <h3 style="margin-top: 0;">STRESS Period (Label = 2) Timeline</h3>

            <div class="timeline-block" style="background-color: #f8f9fa; border-left: 5px solid #6c757d;">
                <strong>Minute 0-3: Preparation begins</strong><br>
                Label = 2 (stress)<br>
                Reality: Person just started, still relatively calm, heart rate beginning to rise
            </div>

            <div class="timeline-block" style="background-color: #fff3cd; border-left: 5px solid #ffc107;">
                <strong>Minute 3-10: Anticipation builds</strong><br>
                Label = 2 (stress)<br>
                Reality: Getting nervous, heart rate increasing, HRV dropping
            </div>

            <div class="timeline-block" style="background-color: #f8d7da; border-left: 5px solid #dc3545;">
                <strong>Minute 10-20: Speech + Arithmetic (Peak Stress)</strong><br>
                Label = 2 (stress)<br>
                Reality: Maximum stress response, highest heart rate, lowest HRV
            </div>

            <div class="timeline-block" style="background-color: #fff3cd; border-left: 5px solid #ffc107;">
                <strong>Minute 20-25: Task ending, starting to relax</strong><br>
                Label = 2 (stress)<br>
                Reality: Starting to calm down, but still labeled as "stress"
            </div>
        </div>

        <div class="important-box">
            <h3>üîç The Problem This Creates</h3>
            <p>All 25 minutes get the same label (2 = stress), but the person's actual physiological stress varies:</p>
            <ul>
                <li><strong>Minutes 0-3:</strong> Low actual stress, but labeled "stress"</li>
                <li><strong>Minutes 10-20:</strong> High actual stress, labeled "stress" ‚úì</li>
                <li><strong>Minutes 20-25:</strong> Decreasing stress, but still labeled "stress"</li>
            </ul>
            <p><strong>This is why we exclude the first 3 minutes and transitions!</strong></p>
        </div>

        <h2>üí° How to Use These Labels for Your Project</h2>

        <h3><span class="step-number">1</span>Filter Out Unreliable Periods</h3>
        <div class="code-box">
# Remove transitions (label = 0)
valid_indices = labels != 0

# Remove first 3 minutes of each condition
# (This removes the "ramp-up" period)
        </div>

        <h3><span class="step-number">2</span>Extract "Pure" Stress vs Baseline</h3>
        <div class="code-box">
# Get baseline data (label = 1)
# Skip first 3 minutes to let person settle
baseline_data = ppg[labels == 1][3*60*64:]  # Skip first 3 min

# Get stress data (label = 2)
# Skip first 3 minutes to avoid ramp-up
# Skip last 1 minute to avoid recovery
stress_data = ppg[labels == 2][3*60*64:-1*60*64]
        </div>

        <h3><span class="step-number">3</span>Compare Heart Rate Metrics</h3>
        <div class="code-box">
# Now you can compare:
# - Baseline period: Should show normal HR, high HRV
# - Stress period: Should show high HR, low HRV

# The labels tell you WHICH period to analyze
# Your signal processing tells you HOW stressed they were
        </div>

        <h2>üéì Summary: What You Need to Remember</h2>

        <table>
            <tr>
                <th style="width: 30%;">Concept</th>
                <th>Explanation</th>
            </tr>
            <tr>
                <td><strong>Labels are timestamps</strong></td>
                <td>They mark when activities happened, like bookmarks in a video</td>
            </tr>
            <tr>
                <td><strong>Not physiological markers</strong></td>
                <td>They don't measure actual stress - they mark the stress-inducing task period</td>
            </tr>
            <tr>
                <td><strong>Same label ‚â† same stress</strong></td>
                <td>All moments during TSST get label=2, even though stress builds and fades</td>
            </tr>
            <tr>
                <td><strong>Your job: Detect the actual stress</strong></td>
                <td>Use the labels to find stress/non-stress periods, then analyze the signals to detect physiological stress</td>
            </tr>
            <tr>
                <td><strong>Exclude transitions and ramp-up</strong></td>
                <td>Skip label=0 and first 3 minutes of each condition for clean data</td>
            </tr>
        </table>

        <div class="analogy">
            <h3>üéØ Final Analogy</h3>
            <p style="font-size: 1.1em; margin: 0;">
                Think of the labels like movie scene markers:<br><br>
                <strong>"Scene 2: Stress Test"</strong> (label = 2)<br><br>
                This tells you the scene involves a stress test, but within that scene, the actor's stress builds up, peaks, and starts to fade.
                The scene label doesn't capture those moment-to-moment changes - that's what your heart rate analysis will do!
            </p>
        </div>

        <div style="margin-top: 50px; padding: 20px; background-color: #e8f4f8; border-radius: 8px;">
            <h3 style="margin-top: 0;">üìå Quick Reference Card</h3>
            <table style="margin: 0;">
                <tr>
                    <th>Label</th>
                    <th>Name</th>
                    <th>What to Do</th>
                </tr>
                <tr>
                    <td><strong>0</strong></td>
                    <td>Transient</td>
                    <td>‚ùå Ignore completely</td>
                </tr>
                <tr>
                    <td><strong>1</strong></td>
                    <td>Baseline</td>
                    <td>‚úÖ Use (skip first 3 min)</td>
                </tr>
                <tr>
                    <td><strong>2</strong></td>
                    <td>Stress</td>
                    <td>‚úÖ Use (skip first 3 min & last 1 min)</td>
                </tr>
                <tr>
                    <td><strong>3</strong></td>
                    <td>Amusement</td>
                    <td>‚ö†Ô∏è Optional (depends on your needs)</td>
                </tr>
                <tr>
                    <td><strong>4</strong></td>
                    <td>Meditation</td>
                    <td>‚ö†Ô∏è Optional (can use as recovery baseline)</td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>